<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Crossword #1</title>

<style>
  body {
    font-family: Arial, Helvetica, sans-serif;
    margin: 20px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(15, 40px);
    grid-template-rows: repeat(15, 40px);
    gap: 0;
    margin-bottom: 20px;
  }

  .cell {
    border: 1px solid #000;
    position: relative;
    text-align: center;
    line-height: 40px;
    font-weight: bold;
    font-size: 18px;
  }

  .block {
    background: #000;
  }

  .number {
    position: absolute;
    top: 2px;
    left: 3px;
    font-size: 9px;
    font-weight: normal;
  }

  .blink-green {
    animation: greenflash 0.4s ease-in-out 2;
  }

  .blink-red {
    animation: redflash 0.4s ease-in-out 2;
  }

  @keyframes greenflash {
    0%,100% { background:#c8f7c5; }
    50% { background:#2ecc71; }
  }

  @keyframes redflash {
    0%,100% { background:#f7c5c5; }
    50% { background:#e74c3c; }
  }
</style>
</head>

<body>

<h2>Crossword #1</h2>

<div class="grid" id="grid"></div>

<script>
const solution = [
  "ALAS###DNA#SHE#",
  "POWER#SEAS#HAND",
  "TRADE#TANK#OBEY",
  "#DRAGGED##PRIME",
  "#SENIOR#GRITTY#",
  "####MAN#REEF###",
  "FAUCET#DAD#AFAR",
  "ARSON#MOB#FLORA",
  "TEEN#SIC#SOLEMN",
  "###THAN#PER####",
  "#SCRAPE#REGARD#",
  "ATLAS##SIMILAR#",
  "PROS#SPIN#NODES",
  "PAST#PUTT#GUISE",
  "#YES#APE###DOSE"
];

const grid = document.getElementById("grid");
const user = Array.from({length:15},()=>Array(15).fill(""));

let count = 1;
const numbers = Array.from({length:15},()=>Array(15).fill(""));

for(let r=0;r<15;r++){
  for(let c=0;c<15;c++){
    if(solution[r][c]==="#") continue;
    const startAcross = (c===0 || solution[r][c-1]==="#") && c<14 && solution[r][c+1]!=="#";
    const startDown = (r===0 || solution[r-1][c]==="#") && r<14 && solution[r+1][c]!=="#";
    if(startAcross || startDown) numbers[r][c]=count++;
  }
}

for(let r=0;r<15;r++){
  for(let c=0;c<15;c++){
    const d=document.createElement("div");
    d.className="cell";
    if(solution[r][c]==="#"){
      d.classList.add("block");
    } else {
      d.contentEditable=true;
      d.addEventListener("input",()=>{
        d.textContent=d.textContent.toUpperCase().slice(0,1);
        user[r][c]=d.textContent;
        checkWord(r,c);
      });
      if(numbers[r][c]){
        const n=document.createElement("div");
        n.className="number";
        n.textContent=numbers[r][c];
        d.appendChild(n);
      }
    }
    grid.appendChild(d);
  }
}

function checkWord(r,c){
  checkDir(r,c,0,1);
  checkDir(r,c,1,0);
}

function checkDir(r,c,dr,dc){
  let sr=r,sc=c;
  while(sr-dr>=0 && sc-dc>=0 && solution[sr-dr][sc-dc]!=="#"){
    sr-=dr; sc-=dc;
  }
  let cells=[],sol="",usr="";
  while(sr<15 && sc<15 && solution[sr][sc]!=="#"){
    cells.push(grid.children[sr*15+sc]);
    sol+=solution[sr][sc];
    usr+=user[sr][sc]||"";
    sr+=dr; sc+=dc;
  }
  if(usr.length===sol.length && !usr.includes("")){
    const ok = usr===sol;
    cells.forEach(c=>{
      c.classList.remove("blink-red","blink-green");
      void c.offsetWidth;
      c.classList.add(ok?"blink-green":"blink-red");
    });
  }
}
</script>

</body>
</html>
